import std.*;
import std.ffi;


var id = 0;

process t[2] {
	var h;
	var mid = 0;
	critical {
		h =  FFILib.new("nffi");
		mid = id;
		++id;
	}

	var cnt = 0;
	while (cnt < 10) {

		critical {
			if (mid == 0) {
				h.call("printExt", FFITypes.VOID, "ola");
			} else {
				h.call("printExt", FFITypes.VOID, "ola 2");
				println(h.call("add", FFITypes.INT, 2, 3));
			}
		}

		++cnt;
	}
}

t.run();
